<?php

include 'vendor/autoload.php';

use Fleetsu\Stock\Stock;

$valid_inputs = [
    [
        'stock'
    ],
    get_class_methods(StockInterface::class)
];

/**
 * Read inputs
 */

foreach ($argv as $index => $input) {
    if ($index + 1 > count($valid_inputs)) {
        break;
    }
    try {
        if (in_array($input, $valid_inputs[$index])) {
            continue;
        } else {
            throw new StockInputException('');
        }
    } catch (StockInputException $exception) {
        echo "Invalid input. See documentation.\n";
        break;
    }
}

$companies = explode(',', strtoupper($argv[2]));
$fmp_driver = new FMPDriver($companies);
$stock = new Stock($fmp_driver);

switch ($argv[1]) {
    case 'company_profile':
        echo print_r($stock->company_profile());
        break;
    case 'company_quote':
        echo print_r($stock->company_quote());
        break;
}
